import{d as K,r as c,c as d,i as O,j as Q,k as W,a as o,l as T,b as e,f as q,w as z,u as F,P as X,o as i,L as Y,p as b,F as k,q as U,t as v,_ as Z}from"./index-aCizOZ3G.js";const ee={class:"social-page"},se={class:"content-area"},ae={key:0,class:"waterfall-container"},te={class:"waterfall-column"},oe={key:0,class:"waterfall-item user-recommend-section"},ie=["onClick"],le={class:"item-media"},ne=["src"],ce=["src"],re={class:"item-content"},de={class:"item-title"},ve={class:"item-info"},ue={class:"user-info"},me=["src"],he={class:"user-name"},pe={class:"item-stats"},fe={class:"like-count"},ge={class:"waterfall-column"},_e={key:0,class:"waterfall-item user-recommend-section"},ye=["onClick"],we={class:"item-media"},be=["src"],ke=["src"],Ie={class:"item-content"},Me={class:"item-title"},xe={class:"item-info"},Ce={class:"user-info"},Be=["src"],Re={class:"user-name"},Ve={class:"item-stats"},$e={class:"like-count"},je={key:1,class:"empty-state"},Pe=K({__name:"index",setup(Se){const R=O(),u=c(!1),_=c(!1),f=c(!1),m=c([]),g=c(1),I=c(5),l=d(()=>R.query.category||"all"),y=d(()=>R.query.type||"all"),M=c(""),x=c("");Q([l,y],([t,s])=>{(t!==M.value||s!==x.value)&&(M.value=t,x.value=s,g.value=1,_.value=!1,m.value.length>0?C(!0):C())});const V=["https://www.w3schools.com/html/mov_bbb.mp4","https://www.w3schools.com/html/movie.mp4","https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4","https://media.w3.org/2010/05/sintel/trailer.mp4","https://media.w3.org/2010/05/bunny/trailer.mp4","https://media.w3.org/2010/05/video/movie_300.mp4","https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4","https://storage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4","https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"],w=["游戏","美食","旅行","音乐","科技","宠物"],E=t=>t!=="all"&&!w.includes(t),h=d(()=>S(m.value).filter((s,a)=>a%2===0)),p=d(()=>S(m.value).filter((s,a)=>a%2===1)),$=d(()=>l.value==="all"||w.includes(l.value)),j=d(()=>Math.random()>.5),P=d(()=>Math.min(1,Math.floor(Math.random()*Math.max(p.value.length,h.value.length,2)))),S=t=>{let s=[...t];return l.value!=="all"&&(s=s.filter(a=>a.category===l.value)),y.value==="video"?s=s.filter(a=>a.type==="video"):y.value==="image"&&(s=s.filter(a=>a.type==="image")),s},A=t=>{const s=t%V.length;return V[s]},H=()=>{const t=Math.floor(Math.random()*w.length);return w[t]},D=()=>new Promise(t=>{if(E(l.value)){f.value=!1,setTimeout(()=>{t([])},1e3);return}setTimeout(()=>{const s=Array.from({length:I.value},(a,r)=>{const n=(g.value-1)*I.value+r+1,B=Math.random()>.7,J=Math.floor(Math.random()*150)+150,N=H();return{id:n,title:"".concat(B?"[视频]":"").concat(N,"内容").concat(n,"，这是一段示例文字"),url:B?A(n):"https://picsum.photos/200/".concat(J,"?random=").concat(n),type:B?"video":"image",username:"用户".concat(n),avatar:"https://randomuser.me/api/portraits/thumb/men/".concat(n%100,".jpg"),likes:Math.floor(Math.random()*1e3),timestamp:new Date().getTime(),category:N}});t(s)},1e3)}),C=async(t=!1)=>{if(!f.value)try{u.value=!0;const s=await D();t?m.value=s:(m.value.push(...s),g.value++),(g.value>5||l.value!=="all"&&s.length<I.value)&&(_.value=!0)}catch(s){console.error("加载数据失败",s)}finally{u.value=!1}},G=async()=>{try{console.log("🚀 ~ onRefresh ~ 下拉刷新"),g.value=1,_.value=!1;const t=await D();m.value=t,u.value=!1}catch(t){console.error("刷新数据失败",t)}finally{f.value=!1}},L=t=>{console.log("点击了内容项",t)};return W(()=>{M.value=l.value,x.value=y.value}),(t,s)=>(i(),o("div",ee,[s[5]||(s[5]=T('<div class="top-bar" data-v-10aae415><div class="top-bar-tabs" data-v-10aae415><div class="tab-item active" data-v-10aae415>发现</div><div class="tab-item" data-v-10aae415>游戏圈</div></div><div class="top-bar-actions" data-v-10aae415><div class="search-icon" data-v-10aae415><i class="iconfont icon-search" data-v-10aae415>🔍</i></div><div class="message-icon" data-v-10aae415><i class="iconfont icon-message" data-v-10aae415>📨</i></div></div></div>',1)),e("div",se,[q(F(X),{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=a=>f.value=a),"head-height":50,onRefresh:G,class:"pull-refresh-container"},{default:z(()=>[q(F(Y),{loading:u.value,"onUpdate:loading":s[0]||(s[0]=a=>u.value=a),finished:_.value,"success-text":"刷新成功","finished-text":h.value.length>0||p.value.length>0?"没有更多了":"",onLoad:C},{default:z(()=>[h.value.length>0||p.value.length>0?(i(),o("div",ae,[e("div",te,[(i(!0),o(k,null,U(h.value,(a,r)=>(i(),o(k,{key:a.id||"recommend-"+r},[$.value&&!j.value&&r===P.value&&h.value.length>0?(i(),o("div",oe,s[2]||(s[2]=[e("div",{class:"section-header"},[e("div",{class:"section-title"},"优质用户推荐")],-1),e("div",{class:"user-list"},[e("div",{class:"user-item"},[e("div",{class:"user-avatar-container"},[e("img",{src:"https://randomuser.me/api/portraits/men/32.jpg",class:"recommend-user-avatar"}),e("div",{class:"user-level"},"6")]),e("div",{class:"user-info-content"},[e("div",{class:"user-nickname"},"不想太无聊"),e("div",{class:"user-desc"},"不知真假的忧愁！")]),e("div",{class:"follow-btn"},"+")]),e("div",{class:"user-item"},[e("div",{class:"user-avatar-container"},[e("img",{src:"https://randomuser.me/api/portraits/women/44.jpg",class:"recommend-user-avatar"}),e("div",{class:"user-level"},"4")]),e("div",{class:"user-info-content"},[e("div",{class:"user-nickname"},"背空千嬅"),e("div",{class:"user-desc"},"喜欢瞎重温旧作")]),e("div",{class:"follow-btn"},"+")])],-1)]))):b("",!0),e("div",{class:"waterfall-item",onClick:n=>L(a)},[e("div",le,[a.type==="video"?(i(),o("video",{key:0,class:"item-video",src:a.url,controls:"",preload:"metadata"},null,8,ne)):(i(),o("img",{key:1,src:a.url,class:"item-image"},null,8,ce))]),e("div",re,[e("div",de,v(a.title),1),e("div",ve,[e("div",ue,[e("img",{src:a.avatar,class:"user-avatar"},null,8,me),e("span",he,v(a.username),1)]),e("div",pe,[e("span",fe,v(a.likes),1)])])])],8,ie)],64))),128))]),e("div",ge,[(i(!0),o(k,null,U(p.value,(a,r)=>(i(),o(k,{key:a.id||"recommend-"+r},[$.value&&j.value&&r===P.value&&p.value.length>0?(i(),o("div",_e,s[3]||(s[3]=[e("div",{class:"section-header"},[e("div",{class:"section-title"},"优质用户推荐")],-1),e("div",{class:"user-list"},[e("div",{class:"user-item"},[e("div",{class:"user-avatar-container"},[e("img",{src:"https://randomuser.me/api/portraits/men/32.jpg",class:"recommend-user-avatar"}),e("div",{class:"user-level"},"6")]),e("div",{class:"user-info-content"},[e("div",{class:"user-nickname"},"不想太无聊"),e("div",{class:"user-desc"},"不知真假的忧愁！")]),e("div",{class:"follow-btn"},"+")]),e("div",{class:"user-item"},[e("div",{class:"user-avatar-container"},[e("img",{src:"https://randomuser.me/api/portraits/women/44.jpg",class:"recommend-user-avatar"}),e("div",{class:"user-level"},"4")]),e("div",{class:"user-info-content"},[e("div",{class:"user-nickname"},"背空千嬅"),e("div",{class:"user-desc"},"喜欢瞎重温旧作")]),e("div",{class:"follow-btn"},"+")])],-1)]))):b("",!0),e("div",{class:"waterfall-item",onClick:n=>L(a)},[e("div",we,[a.type==="video"?(i(),o("video",{key:0,class:"item-video",src:a.url,controls:"",preload:"metadata"},null,8,be)):(i(),o("img",{key:1,src:a.url,class:"item-image"},null,8,ke))]),e("div",Ie,[e("div",Me,v(a.title),1),e("div",xe,[e("div",Ce,[e("img",{src:a.avatar,class:"user-avatar"},null,8,Be),e("span",Re,v(a.username),1)]),e("div",Ve,[e("span",$e,v(a.likes),1)])])])],8,ye)],64))),128))])])):b("",!0),!u.value&&h.value.length===0&&p.value.length===0?(i(),o("div",je,s[4]||(s[4]=[e("div",{class:"empty-icon"},"📭",-1),e("div",{class:"empty-text"},v("该分类暂无内容"),-1)]))):b("",!0)]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])]),s[6]||(s[6]=T('<div class="floating-button" data-v-10aae415><i class="iconfont icon-add" data-v-10aae415>+</i></div><div class="bottom-bar" data-v-10aae415><div class="bottom-bar-item" data-v-10aae415><i class="iconfont icon-home" data-v-10aae415>🏠</i><span data-v-10aae415>首页</span></div><div class="bottom-bar-item active" data-v-10aae415><i class="iconfont icon-discover" data-v-10aae415>🔎</i><span data-v-10aae415>社区</span></div><div class="bottom-bar-item" data-v-10aae415><i class="iconfont icon-star" data-v-10aae415>⭐</i><span data-v-10aae415>收藏</span></div><div class="bottom-bar-item" data-v-10aae415><i class="iconfont icon-profile" data-v-10aae415>👤</i><span data-v-10aae415>我的</span></div><div class="bottom-bar-item" data-v-10aae415><i class="iconfont icon-setting" data-v-10aae415>⚙️</i><span data-v-10aae415>设置</span></div></div>',2))]))}}),Le=Z(Pe,[["__scopeId","data-v-10aae415"]]);export{Le as default};
