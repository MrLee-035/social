import{d as K,r as c,c as d,i as O,j as Q,k as W,a as o,l as T,b as e,f as q,w as z,u as F,P as X,o as i,L as Y,p as b,F as k,q as U,t as v,_ as Z}from"./index-bMTNLDct.js";const ee={class:"social-page"},se={class:"content-area"},te={key:0,class:"waterfall-container"},ae={class:"waterfall-column"},oe={key:0,class:"waterfall-item user-recommend-section"},ie=["onClick"],le={class:"item-media"},ne=["src"],ce=["src"],re={class:"item-content"},de={class:"item-title"},ve={class:"item-info"},ue={class:"user-info"},me=["src"],pe={class:"user-name"},he={class:"item-stats"},fe={class:"like-count"},ge={class:"waterfall-column"},_e={key:0,class:"waterfall-item user-recommend-section"},ye=["onClick"],we={class:"item-media"},be=["src"],ke=["src"],Ie={class:"item-content"},xe={class:"item-title"},Me={class:"item-info"},Ce={class:"user-info"},Be=["src"],Re={class:"user-name"},Ve={class:"item-stats"},$e={class:"like-count"},je={key:1,class:"empty-state"},Pe=K({__name:"index",setup(Se){const R=O(),u=c(!1),_=c(!1),f=c(!1),m=c([]),g=c(1),I=c(5),l=d(()=>R.query.category||"all"),y=d(()=>R.query.type||"all"),x=c(""),M=c("");Q([l,y],([a,s])=>{(a!==x.value||s!==M.value)&&(x.value=a,M.value=s,g.value=1,_.value=!1,m.value.length>0?C(!0):C())});const V=["/src/assets/video/text.mp4","https://www.w3schools.com/html/mov_bbb.mp4","https://www.w3schools.com/html/movie.mp4","https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4","https://media.w3.org/2010/05/sintel/trailer.mp4","https://media.w3.org/2010/05/bunny/trailer.mp4","https://media.w3.org/2010/05/video/movie_300.mp4","https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4","https://storage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4","https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"],w=["游戏","美食","旅行","音乐","科技","宠物"],E=a=>a!=="all"&&!w.includes(a),p=d(()=>S(m.value).filter((s,t)=>t%2===0)),h=d(()=>S(m.value).filter((s,t)=>t%2===1)),$=d(()=>l.value==="all"||w.includes(l.value)),j=d(()=>Math.random()>.5),P=d(()=>Math.min(1,Math.floor(Math.random()*Math.max(h.value.length,p.value.length,2)))),S=a=>{let s=[...a];return l.value!=="all"&&(s=s.filter(t=>t.category===l.value)),y.value==="video"?s=s.filter(t=>t.type==="video"):y.value==="image"&&(s=s.filter(t=>t.type==="image")),s},A=a=>{const s=a%V.length;return V[s]},H=()=>{const a=Math.floor(Math.random()*w.length);return w[a]},D=()=>new Promise(a=>{if(E(l.value)){f.value=!1,setTimeout(()=>{a([])},1e3);return}setTimeout(()=>{const s=Array.from({length:I.value},(t,r)=>{const n=(g.value-1)*I.value+r+1,B=Math.random()>.7,J=Math.floor(Math.random()*150)+150,N=H();return{id:n,title:"".concat(B?"[视频]":"").concat(N,"内容").concat(n,"，这是一段示例文字"),url:B?A(n):"https://picsum.photos/200/".concat(J,"?random=").concat(n),type:B?"video":"image",username:"用户".concat(n),avatar:"https://randomuser.me/api/portraits/thumb/men/".concat(n%100,".jpg"),likes:Math.floor(Math.random()*1e3),timestamp:new Date().getTime(),category:N}});a(s)},1e3)}),C=async(a=!1)=>{if(!f.value)try{u.value=!0;const s=await D();a?m.value=s:(m.value.push(...s),g.value++),(g.value>5||l.value!=="all"&&s.length<I.value)&&(_.value=!0)}catch(s){console.error("加载数据失败",s)}finally{u.value=!1}},G=async()=>{try{console.log("🚀 ~ onRefresh ~ 下拉刷新"),g.value=1,_.value=!1;const a=await D();m.value=a,u.value=!1}catch(a){console.error("刷新数据失败",a)}finally{f.value=!1}},L=a=>{console.log("点击了内容项",a)};return W(()=>{x.value=l.value,M.value=y.value}),(a,s)=>(i(),o("div",ee,[s[5]||(s[5]=T('<div class="top-bar" data-v-532e2151><div class="top-bar-tabs" data-v-532e2151><div class="tab-item active" data-v-532e2151>发现</div><div class="tab-item" data-v-532e2151>游戏圈</div></div><div class="top-bar-actions" data-v-532e2151><div class="search-icon" data-v-532e2151><i class="iconfont icon-search" data-v-532e2151>🔍</i></div><div class="message-icon" data-v-532e2151><i class="iconfont icon-message" data-v-532e2151>📨</i></div></div></div>',1)),e("div",se,[q(F(X),{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=t=>f.value=t),"head-height":50,onRefresh:G,class:"pull-refresh-container"},{default:z(()=>[q(F(Y),{loading:u.value,"onUpdate:loading":s[0]||(s[0]=t=>u.value=t),finished:_.value,"success-text":"刷新成功","finished-text":p.value.length>0||h.value.length>0?"没有更多了":"",onLoad:C},{default:z(()=>[p.value.length>0||h.value.length>0?(i(),o("div",te,[e("div",ae,[(i(!0),o(k,null,U(p.value,(t,r)=>(i(),o(k,{key:t.id||"recommend-"+r},[$.value&&!j.value&&r===P.value&&p.value.length>0?(i(),o("div",oe,s[2]||(s[2]=[e("div",{class:"section-header"},[e("div",{class:"section-title"},"优质用户推荐")],-1),e("div",{class:"user-list"},[e("div",{class:"user-item"},[e("div",{class:"user-avatar-container"},[e("img",{src:"https://randomuser.me/api/portraits/men/32.jpg",class:"recommend-user-avatar"}),e("div",{class:"user-level"},"6")]),e("div",{class:"user-info-content"},[e("div",{class:"user-nickname"},"不想太无聊"),e("div",{class:"user-desc"},"不知真假的忧愁！")]),e("div",{class:"follow-btn"},"+")]),e("div",{class:"user-item"},[e("div",{class:"user-avatar-container"},[e("img",{src:"https://randomuser.me/api/portraits/women/44.jpg",class:"recommend-user-avatar"}),e("div",{class:"user-level"},"4")]),e("div",{class:"user-info-content"},[e("div",{class:"user-nickname"},"背空千嬅"),e("div",{class:"user-desc"},"喜欢瞎重温旧作")]),e("div",{class:"follow-btn"},"+")])],-1)]))):b("",!0),e("div",{class:"waterfall-item",onClick:n=>L(t)},[e("div",le,[t.type==="video"?(i(),o("video",{key:0,class:"item-video",src:t.url,controls:"",preload:"metadata"},null,8,ne)):(i(),o("img",{key:1,src:t.url,class:"item-image"},null,8,ce))]),e("div",re,[e("div",de,v(t.title),1),e("div",ve,[e("div",ue,[e("img",{src:t.avatar,class:"user-avatar"},null,8,me),e("span",pe,v(t.username),1)]),e("div",he,[e("span",fe,v(t.likes),1)])])])],8,ie)],64))),128))]),e("div",ge,[(i(!0),o(k,null,U(h.value,(t,r)=>(i(),o(k,{key:t.id||"recommend-"+r},[$.value&&j.value&&r===P.value&&h.value.length>0?(i(),o("div",_e,s[3]||(s[3]=[e("div",{class:"section-header"},[e("div",{class:"section-title"},"优质用户推荐")],-1),e("div",{class:"user-list"},[e("div",{class:"user-item"},[e("div",{class:"user-avatar-container"},[e("img",{src:"https://randomuser.me/api/portraits/men/32.jpg",class:"recommend-user-avatar"}),e("div",{class:"user-level"},"6")]),e("div",{class:"user-info-content"},[e("div",{class:"user-nickname"},"不想太无聊"),e("div",{class:"user-desc"},"不知真假的忧愁！")]),e("div",{class:"follow-btn"},"+")]),e("div",{class:"user-item"},[e("div",{class:"user-avatar-container"},[e("img",{src:"https://randomuser.me/api/portraits/women/44.jpg",class:"recommend-user-avatar"}),e("div",{class:"user-level"},"4")]),e("div",{class:"user-info-content"},[e("div",{class:"user-nickname"},"背空千嬅"),e("div",{class:"user-desc"},"喜欢瞎重温旧作")]),e("div",{class:"follow-btn"},"+")])],-1)]))):b("",!0),e("div",{class:"waterfall-item",onClick:n=>L(t)},[e("div",we,[t.type==="video"?(i(),o("video",{key:0,class:"item-video",src:t.url,controls:"",preload:"metadata"},null,8,be)):(i(),o("img",{key:1,src:t.url,class:"item-image"},null,8,ke))]),e("div",Ie,[e("div",xe,v(t.title),1),e("div",Me,[e("div",Ce,[e("img",{src:t.avatar,class:"user-avatar"},null,8,Be),e("span",Re,v(t.username),1)]),e("div",Ve,[e("span",$e,v(t.likes),1)])])])],8,ye)],64))),128))])])):b("",!0),!u.value&&p.value.length===0&&h.value.length===0?(i(),o("div",je,s[4]||(s[4]=[e("div",{class:"empty-icon"},"📭",-1),e("div",{class:"empty-text"},v("该分类暂无内容"),-1)]))):b("",!0)]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])]),s[6]||(s[6]=T('<div class="floating-button" data-v-532e2151><i class="iconfont icon-add" data-v-532e2151>+</i></div><div class="bottom-bar" data-v-532e2151><div class="bottom-bar-item" data-v-532e2151><i class="iconfont icon-home" data-v-532e2151>🏠</i><span data-v-532e2151>首页</span></div><div class="bottom-bar-item active" data-v-532e2151><i class="iconfont icon-discover" data-v-532e2151>🔎</i><span data-v-532e2151>社区</span></div><div class="bottom-bar-item" data-v-532e2151><i class="iconfont icon-star" data-v-532e2151>⭐</i><span data-v-532e2151>收藏</span></div><div class="bottom-bar-item" data-v-532e2151><i class="iconfont icon-profile" data-v-532e2151>👤</i><span data-v-532e2151>我的</span></div><div class="bottom-bar-item" data-v-532e2151><i class="iconfont icon-setting" data-v-532e2151>⚙️</i><span data-v-532e2151>设置</span></div></div>',2))]))}}),Le=Z(Pe,[["__scopeId","data-v-532e2151"]]);export{Le as default};
